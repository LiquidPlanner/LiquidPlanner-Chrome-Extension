<html>
<head>
<title>LiquidChrome Options</title>
<link rel="stylesheet" href="/style.css" type="text/css" charset="utf-8">
<script src='jquery-1.3.1.js'></script>
<script src='liquid_chrome.js'></script>

<script type="text/javascript">

function showError(req, status, err) {  
  $(document.body).append('Could not access LiquidPlanner.');
}

function showWorkSpaces(spaces, status) {
  var html = $('#workspaces');
  var currentId = LiquidChrome.defaults.space_id;
  
  for (var i = 0, space; space = spaces[i]; i++) {
    var opt = $('<option>').attr('value', space.id).text(space.name)
    if(space.id == currentId){opt.attr('selected', 'selected');}
    html.append(opt);
  }
  
  updateSpaceId();
}

function updateSpaceId(){
  var spaceId = $('#workspaces').get(0).value;
  localStorage.space_id = spaceId;
}

$(document).ready(function(){
  LiquidChrome.workspaces({success: showWorkSpaces, error: showError});
  $('#workspaces').change(updateSpaceId);
});

</script>
</head>
<body id='options'>

<h1>LiquidChrome Options</h1>
<div class='option'>
  <lable>Primary Workspace: <select id="workspaces"></select></lable>
  <p class='info'>
    This workspace will be used to list tasks on the LiquidChrome menu (<img src='icon.png'/>)
  </p>
</div>
</body>
</html>